<link rel="stylesheet" href="https://cdn.datatables.net/1.13.1/css/jquery.dataTables.min.css">
<link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.3.2/css/buttons.dataTables.min.css">
<ng-template #callUpdateDialog class="mat-mdc-dialog-surfac">

  <form [formGroup]="updateForn" >
      <div class="row"  style=" width: 551px; align-items: center;   justify-content: center; margin: 0; padding: 0;">
         <h3 class="h3">Updade Personal Information</h3>
         <hr style="height: 1px; width: 100%; background-color:aquamarine;">
        <div class="col-10 div">
          <label for="M2">Image</label>
          <input class="input" required id="M2" type="file"
          formControlName="imagepath" #file (change)="uploadFileabout2(file.files)" [(ngModel)]="data.imagepath">
        </div>
        <div class="col-10 div">
          <label for="firstname">First Name</label>
          <input id="firstname" type="text" required  class="input"   matInput formControlName="firstname" [(ngModel)]="data.firstname">
        </div>

        <div class="col-10 div">
          <label for="firstname1">Last Name</label>
          <input id="firstname1" type="text" required  class="input"   matInput formControlName="lastname" [(ngModel)]="data.lastname">
        </div>
        <div class="col-10 div">
          <label for="firstname2">Phone</label>
          <input id="firstname2" type="text" required class="input"   matInput formControlName="phonenumber" [(ngModel)]="data.phonenumber">
        </div>
        <div class="col-10 div">
          <label for="firstname3">EMAIL</label>
          <input id="firstname3" type="email" required class="input"  matInput formControlName="email" [(ngModel)]="data.email">
        </div>

      </div>
  </form>




  <hr style="height: 1px;background-color: #000;">
  <div class="row" style=" text-align: center;margin: 0;
  justify-content: space-around;">
   <button style="width: 33%;" class="btn" mat-button mat-dialog-close>Cancel</button>
   <button style="width: 33%;" class="btn" mat-button   cdkFocusInitial (click)="updateData()">Update</button>

  </div>
</ng-template>

<ng-template>
    
</ng-template>

<ng-template #callUpdatecharityDialog class="mat-mdc-dialog-surfac">

  <form [formGroup]="updateCharityForm" >
      <div class="row"  style=" width: 551px; align-items: center;   justify-content: center; margin: 0; padding: 0;">
         <h3 class="h3">Updade Charity Informations</h3>
         <hr style="height: 1px; width: 100%; background-color:aquamarine;">
        <div class="col-10 div">
          <label for="M2">Image</label>
          <input class="input" id="M2" type="file"
          formControlName="imagepath" #file (change)="uploadFileabout2(file.files)" [(ngModel)]="data.imagepath">
        </div>
        <div class="col-10 div">
          <label for="firstname">Charity Name</label>
          <input id="charityname" type="text"  class="input" matInput formControlName="charityname" [(ngModel)]="data.charityname">
        </div>

         <!-- <div class="col-10 div">
          <label for="firstname1">Goal</label>
          <input id="firstname1" type="text"  class="input"   matInput formControlName="goal" [(ngModel)]="data.goal">
        </div>  -->
        <!-- <div class="col-10 div">
          <label for="firstname2">Number Donation</label>
          <input id="firstname2" type="text"  class="input"   matInput formControlName="numdonation" [(ngModel)]="data.numdonation">
        </div> -->
        <div class="col-10 div">
          <label for="firstname3">Category</label>
        <select class="input"   [(ngModel)]="data.categoryidFk" formControlName="categoryidFk">
          <option *ngFor="let option of beneficary.category" [value]="option.categoryid">{{ option.categoryname }}</option>
        </select>
        </div>

        <div class="col-10 div">
          <label for="firstname3">Document</label>
          <input class="input" id="firstname3" type="file"
          formControlName="docidFk" #filEe (change)="uploadFileabout1(filEe.files)" [(ngModel)]="data.docidFk">
        </div>
      </div>
  </form>




  <hr style="height: 1px;background-color: #000;">
  <div class="row" style=" text-align: center;margin: 0;
  justify-content: space-around;">
   <button style="width: 33%;" class="btn" mat-button mat-dialog-close>Cancel</button>
   <button style="width: 33%;" class="btn" mat-button   cdkFocusInitial (click)="updateCharityData()">Update</button>

  </div>
</ng-template>
<ng-template #callcreatecharity >

    <div class="row" style="justify-content: center;width: 1500px;">
        <div class="col-md-6 col-sm-7" style="box-shadow: rgb(0 0 0 / 35%) 0px 5px 15px;
        margin: 32px;
        padding: 23px;
        border-radius: 5px;">
          <h2 mat-dialog-title style="    text-align: center; font-family: fangsong;  font-weight: bolder; font-size: 32px;">
            Create Charity</h2>
          <hr
            style="height: 2px;margin: 30px 0px; width: 100%; background-color: #000;box-shadow: rgba(0, 0, 0, 0.25) 0px 54px 55px, rgba(0, 0, 0, 0.12) 0px -12px 30px, rgba(0, 0, 0, 0.12) 0px 4px 6px, rgba(0, 0, 0, 0.17) 0px 12px 13px, rgba(0, 0, 0, 0.09) 0px -3px 5px;">
          <mat-dialog-content class="mat-typography">
            <form [formGroup]="CreateForm" style="width: 100%;">
      
              <!-- <div class="col-12  ">
                    <label>Goal</label>
                    <input type="number"  min="1" (change)="matchError()" required class="input" matInput formControlName="goal">
      
                    <label  class="error"  *ngIf="CreateForm.controls['goal'].hasError('required')">
                      goal is <strong>required</strong>
                    </label>
                  </div> -->
      
      
              <br>
              <div class="col-12">
                <label>Document</label><br>
                <input class="input" required type="file" #filEe (change)="uploadFileabout1(filEe.files)"
                  formControlName="docidFk"><br>
                <label class="error" *ngIf="CreateForm.controls['docidFk'].hasError('required')">
                  Document is <strong>required</strong>
                </label>
              </div>
              <br>
              <div class="col-12">
                <label>Charity Name</label><br>
                <input class="input" required type="text" matInput formControlName="charityname"><br>
                <label class="error" *ngIf="CreateForm.controls['charityname'].hasError('required')">
                  Charity Name is <strong>required</strong>
                </label>
              </div>
              <br>
              <div class="col-12">
                <label>Description</label><br>
                <input class="input" required type="email" matInput formControlName="email"><br>
                <label class="error"
                  *ngIf="CreateForm.controls['email'].hasError('required') || CreateForm.controls['email'].hasError('email')">
                  Description is <strong>required</strong>
                </label>
              </div>
              <br>
              <!-- <div class="col-12">
                      <label>Number Donation</label>
                      <input class="input" min="1" required type="number" matInput formControlName="numdonation">
                        <label  class="error"  *ngIf="CreateForm.controls['numdonation'].hasError('required')">
                        Numdonation is <strong>required</strong>
                      </label>
                    </div> -->
              <br>
              <div class="col-12">
                <label>Category</label><br>
                <select class="input" required formControlName="categoryidFk">
                  <option *ngFor="let option of beneficary.category" [value]="option.categoryid">{{ option.categoryname }}
                  </option>
                </select><br>
                <label class="error" *ngIf="CreateForm.controls['balance'].hasError('required')">
                  Category is <strong>required</strong>
                </label>
              </div>
              <!-- <br>
                    <div class="col-12">
                      <label>Balance</label>
                      <input class="input" min="1" required type="number" matInput formControlName="balance">
                       <label  class="error"  *ngIf="CreateForm.controls['balance'].hasError('required')">
                        Balance is <strong>required</strong>
                      </label>
                    </div> -->
              <br>
              <div class="col-12">
                <label>Image</label><br>
                <input class="input" required type="file" formControlName="imagepath" #file (change)="uploadFile(file.files)"><br>
                <label class="error" *ngIf="CreateForm.controls['imagepath'].hasError('required')">
                  Image is <strong>required</strong>
                </label>
              </div>
      
            </form>
          </mat-dialog-content>
          <mat-dialog-actions align="end">
            <div style="margin-top: 30px;">
              <button style="    margin: 33px 32px 0 0;"
                class="btn btn-sm btn-outline-primary btn-round mb-0 me-1 mt-2 mt-md-0" mat-button
                mat-dialog-close>Cancel</button>
              <button style="    margin: 33px 32px 0 0;"
                class="btn btn-sm btn-outline-primary btn-round mb-0 me-1 mt-2 mt-md-0" mat-button [mat-dialog-close]="true"
                cdkFocusInitial (click)="SaveDate()">Save</button>
      
            </div>
          </mat-dialog-actions>
      
        </div>
      </div>

</ng-template>





<div class="g-sidenav-show bg-gray-100">

 <!--side bar-->


  <div class="main-content position-relative bg-gray-100 max-height-vh-100 h-100">
      <!-- Navbar -->
      <div class="container position-sticky z-index-sticky top-0">
          <div class="row">
              <div class="col-12">

                 <app-navbar></app-navbar>
              </div>
          </div>
      </div>

      <!-- End Navbar -->
      <div class="container-fluid">
          <div class="page-header min-height-300 border-radius-xl mt-4" style="background-image: url('../assets/img/curved-images/curved0.jpg'); background-position-y: 50%;">
              <span class="mask bg-gradient-primary opacity-6"></span>
          </div>
          <div class="card card-body blur shadow-blur mx-4 mt-n6 overflow-hidden">
              <div class="row gx-4">
                  <div class="col-auto">
                      <div class="avatar avatar-xl position-relative">
                          <img src="../../../assets/img/{{beneficary.user.imagepath}}" alt="profile_image" class="w-100 border-radius-lg shadow-sm">
                      </div>
                  </div>
                  <div class="col-auto my-auto">
                      <div class="h-100">
                          <h5 class="mb-1">
                            {{beneficary.user.firstname}}
                          </h5>
                          <p class="mb-0 font-weight-bold text-sm">
                            {{beneficary.charityId.charityname}}
                          </p>
                      </div>
                  </div>
                  <div class="col-lg-6 col-md-7 my-sm-auto ms-sm-auto me-sm-0 mx-auto mt-3" >
                      <div class="nav-wrapper position-relative end-0">
                          <ul class="nav nav-pills nav-fill p-1 bg-transparent" role="tablist">
                               <li class="nav-item">
                                  <p class="mb-0 font-weight-bold text-sm" style="    margin: 6px 0 12px;">Balance : <span id="walletmonye">{{beneficary.walletUser.balance}} </span>$</p>
                               </li>
                               <li class="nav-item">
                                <p class="mb-0 font-weight-bold text-sm" style="    margin: 6px 0 12px;">Wallet Number : {{beneficary.walletUser.walletid}}</p>
                             </li>
                              <li class="nav-item">
                                  <BUtton (click)="transfermoney()" class="btn btn-sm btn-outline-primary btn-round mb-0 me-1 mt-2 mt-md-0">Transfer Money</BUtton>
                              </li>
                              <li class="nav-item">
                                <Button *ngIf="show" (click)="Create()" class="btn btn-sm btn-outline-primary btn-round mb-0 me-1 mt-2 mt-md-0">Create Charity</Button>
                            </li>
                            <li>
                                
                                    <button *ngIf="show1" class="btn btn-sm btn-outline-primary btn-round mb-0 me-1 mt-2 mt-md-0" (click)='generateWallett()'><i
                                        class="fas fa-plus"></i>&nbsp;&nbsp;Create Wallet</button>
                                  
                            </li>
                          </ul>
                      </div>
                  </div>
              </div>
          </div>
      </div>
      <div class="container-fluid py-4">
          <div class="row justify-content-center " style="margin-bottom: 70px;">


              <div class="col-12 col-xl-4">
                <div class="card h-100">
                    <div class="card-header pb-0 p-3">
                        <div class="row">
                            <div class="col-md-8 d-flex align-items-center">
                                <h6 class="mb-0">Profile Information</h6>
                            </div>
                            <div class="col-md-4 text-end">
                                <a href="javascript:;">
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="card-body p-3">
                          <img width="100%" style="    height: 292px;box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;" src="../../../assets/img/{{beneficary.user.imagepath}}" class="text-sm" alt="">
                        <hr class="horizontal gray-light my-4">
                        <ul class="list-group" >
                            <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-dark">First Name:</strong> &nbsp; {{beneficary.user.firstname}}</li>
                            <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-dark">Last Name:</strong> &nbsp; {{beneficary.user.lastname}}</li>
                            <li class="list-group-item border-0 ps-0 text-sm"><strong class="text-dark">Username:</strong> &nbsp;{{beneficary.user.username}}</li>
                            <li class="list-group-item border-0 ps-0 text-sm"><strong class="text-dark" style="padding-right: 36px;">Email:</strong> &nbsp;{{beneficary.user.email}}</li>
                            <li class="list-group-item border-0 ps-0 text-sm"><strong class="text-dark" style="padding-right: 31px;">Phone:</strong> &nbsp;{{beneficary.user.phonenumber}}</li>
                        </ul>
                        <div style="text-align: right; padding-top: 16px;margin-top: 36px;">
                          <BUtton (click)="updateuserInfo(beneficary.user)"  class="btn btn-sm btn-outline-primary btn-round mb-0 me-1 mt-2 mt-md-0">Edit</BUtton>
                          <BUtton (click)="requestmoney(beneficary.user)"  class="btn btn-sm btn-outline-primary btn-round mb-0 me-1 mt-2 mt-md-0">{{beneficary.user.requestMoney}}</BUtton>

                        </div>
                    </div>
                </div>
            </div>
         
            <div class="col-12 col-xl-4" *ngIf="!show">
              <div class="card h-100">
                  <div class="card-header pb-0 p-3">
                      <div class="row">
                          <div class="col-md-8 d-flex align-items-center">
                              <h6 class="mb-0">Charity Information</h6>
                          </div>
                          <div class="col-md-4 text-end">
                              <a href="javascript:;">
                                  <i class="fas fa-user-edit text-secondary text-sm" data-bs-toggle="tooltip" data-bs-placement="top"  (click)="updatecharityInfo(beneficary.charityId)" title="Edit Profile"></i>
                              </a>
                          </div>
                      </div>
                  </div>
                  <div class="card-body p-3">
                    <img width="100%" style="    height: 292px;box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;" src="../../../assets/img/{{beneficary.charityId.imagepath}}" class="text-sm" alt="">

                      <hr class="horizontal gray-light my-4">
                      <ul class="list-group" >
                          <li class="list-group-item border-0 ps-0 text-sm"><strong class="text-dark">Charity Name:</strong> &nbsp;{{beneficary.charityId.charityname}}</li>
                          <li class="list-group-item border-0 ps-0 text-sm"><strong class="text-dark" style="padding-right: 56px;">GOAL :</strong> &nbsp;{{beneficary.charityId.goal}}$</li>
                          <li class="list-group-item border-0 ps-0 text-sm"><strong class="text-dark">Your Balance :</strong> &nbsp;{{beneficary.charityId.balance}}</li>

                          <li class="list-group-item border-0 ps-0 text-sm"><strong class="text-dark">Num Donation :</strong> &nbsp;{{beneficary.charityId.numdonation}}</li>
                          <li class="list-group-item border-0 ps-0 text-sm"><strong class="text-dark" style="padding-right: 19px;">Is Accepted :</strong> &nbsp; {{beneficary.charityId.isaccepted}}</li>
                          <li class="list-group-item border-0 ps-0 text-sm"><strong class="text-dark" style="    padding-right: 27px;">Document :</strong> &nbsp;<a href="../../../assets/Docs/{{beneficary.charityId.docidFk}}" target="_blank">Show</a> </li>
                      </ul>
                      <div style="text-align: right; padding-top: 16px;margin-top: 36px;">
                        <BUtton (click)="deletecharity(beneficary.charityId.charityid)"  class="btn btn-sm btn-outline-primary btn-round mb-0 me-1 mt-2 mt-md-0">Delete</BUtton>

                      </div>
                        <div >
                            
                        </div>
                  </div>
              </div>

            </div>
              <!-- <div class="col-12 col-xl-4">
                  <div class="card h-100">
                      <div class="card-header pb-0 p-3">
                          <h6 class="mb-0">Conversations</h6>
                      </div>
                      <div class="card-body p-3">
                          <ul class="list-group">
                              <li class="list-group-item border-0 d-flex align-items-center px-0 mb-2">
                                  <div class="avatar me-3">
                                      <img src="../assets/img/kal-visuals-square.jpg" alt="kal" class="border-radius-lg shadow">
                                  </div>
                                  <div class="d-flex align-items-start flex-column justify-content-center">
                                      <h6 class="mb-0 text-sm">Sophie B.</h6>
                                      <p class="mb-0 text-xs">Hi! I need more information..</p>
                                  </div>
                                  <a class="btn btn-link pe-3 ps-0 mb-0 ms-auto" href="javascript:;">Reply</a>
                              </li>
                              <li class="list-group-item border-0 d-flex align-items-center px-0 mb-2">
                                  <div class="avatar me-3">
                                      <img src="../assets/img/marie.jpg" alt="kal" class="border-radius-lg shadow">
                                  </div>
                                  <div class="d-flex align-items-start flex-column justify-content-center">
                                      <h6 class="mb-0 text-sm">Anne Marie</h6>
                                      <p class="mb-0 text-xs">Awesome work, can you..</p>
                                  </div>
                                  <a class="btn btn-link pe-3 ps-0 mb-0 ms-auto" href="javascript:;">Reply</a>
                              </li>
                              <li class="list-group-item border-0 d-flex align-items-center px-0 mb-2">
                                  <div class="avatar me-3">
                                      <img src="../assets/img/ivana-square.jpg" alt="kal" class="border-radius-lg shadow">
                                  </div>
                                  <div class="d-flex align-items-start flex-column justify-content-center">
                                      <h6 class="mb-0 text-sm">Ivanna</h6>
                                      <p class="mb-0 text-xs">About files I can..</p>
                                  </div>
                                  <a class="btn btn-link pe-3 ps-0 mb-0 ms-auto" href="javascript:;">Reply</a>
                              </li>
                              <li class="list-group-item border-0 d-flex align-items-center px-0 mb-2">
                                  <div class="avatar me-3">
                                      <img src="../assets/img/team-4.jpg" alt="kal" class="border-radius-lg shadow">
                                  </div>
                                  <div class="d-flex align-items-start flex-column justify-content-center">
                                      <h6 class="mb-0 text-sm">Peterson</h6>
                                      <p class="mb-0 text-xs">Have a great afternoon..</p>
                                  </div>
                                  <a class="btn btn-link pe-3 ps-0 mb-0 ms-auto" href="javascript:;">Reply</a>
                              </li>
                              <li class="list-group-item border-0 d-flex align-items-center px-0">
                                  <div class="avatar me-3">
                                      <img src="../assets/img/team-3.jpg" alt="kal" class="border-radius-lg shadow">
                                  </div>
                                  <div class="d-flex align-items-start flex-column justify-content-center">
                                      <h6 class="mb-0 text-sm">Nick Daniel</h6>
                                      <p class="mb-0 text-xs">Hi! I need more information..</p>
                                  </div>
                                  <a class="btn btn-link pe-3 ps-0 mb-0 ms-auto" href="javascript:;">Reply</a>
                              </li>
                          </ul>
                      </div>
                  </div>
              </div> -->

          </div>
          <footer class="footer pt-3  ">
              <div class="container-fluid">
                  <div class="row align-items-center justify-content-lg-between">
                      <div class="col-lg-6 mb-lg-0 mb-4">
                          <div class="copyright text-center text-sm text-muted text-lg-start">
                              ©
                              <script>
                                  document.write(new Date().getFullYear())
                              </script>, made with <i class="fa fa-heart"></i> by
                              <a class="font-weight-bold" target="_blank">Charity Platform</a>
                          </div>
                      </div>
                      <div class="col-lg-6">
                          
                      </div>
                  </div>
              </div>
          </footer>
      </div>
  </div>
  <div class="fixed-plugin">
      <a class="fixed-plugin-button text-dark position-fixed px-3 py-2">
          <i class="fa fa-cog py-2"> </i>
      </a>
      <div class="card shadow-lg ">
          <div class="card-header pb-0 pt-3 ">
              <div class="float-start">
                  <h5 class="mt-3 mb-0">Soft UI Configurator</h5>
                  <p>See our dashboard options.</p>
              </div>
              <div class="float-end mt-4">
                  <button class="btn btn-link text-dark p-0 fixed-plugin-close-button">
            <i class="fa fa-close"></i>
          </button>
              </div>
              <!-- End Toggle Button -->
          </div>
          <hr class="horizontal dark my-1">
          <div class="card-body pt-sm-3 pt-0">
              <!-- Sidebar Backgrounds -->
              <div>
                  <h6 class="mb-0">Sidebar Colors</h6>
              </div>
              <a href="javascript:void(0)" class="switch-trigger background-color">
                  <div class="badge-colors my-2 text-start">
                      <span class="badge filter bg-gradient-primary active" data-color="primary" onclick="sidebarColor(this)"></span>
                      <span class="badge filter bg-gradient-dark" data-color="dark" onclick="sidebarColor(this)"></span>
                      <span class="badge filter bg-gradient-info" data-color="info" onclick="sidebarColor(this)"></span>
                      <span class="badge filter bg-gradient-success" data-color="success" onclick="sidebarColor(this)"></span>
                      <span class="badge filter bg-gradient-warning" data-color="warning" onclick="sidebarColor(this)"></span>
                      <span class="badge filter bg-gradient-danger" data-color="danger" onclick="sidebarColor(this)"></span>
                  </div>
              </a>
              <!-- Sidenav Type -->
              <div class="mt-3">
                  <h6 class="mb-0">Sidenav Type</h6>
                  <p class="text-sm">Choose between 2 different sidenav types.</p>
              </div>
              <div class="d-flex">
                  <button class="btn bg-gradient-primary w-100 px-3 mb-2 active" data-class="bg-transparent" onclick="sidebarType(this)">Transparent</button>
                  <button class="btn bg-gradient-primary w-100 px-3 mb-2 ms-2" data-class="bg-white" onclick="sidebarType(this)">White</button>
              </div>
              <p class="text-sm d-xl-none d-block mt-2">You can change the sidenav type just on desktop view.</p>
              <!-- Navbar Fixed -->
              <div class="mt-3">
                  <h6 class="mb-0">Navbar Fixed</h6>
              </div>
              <div class="form-check form-switch ps-0">
                  <input class="form-check-input mt-1 ms-auto" type="checkbox" id="navbarFixed" onclick="navbarFixed(this)">
              </div>
              <hr class="horizontal dark my-sm-4">
              <a class="btn bg-gradient-dark w-100" href="https://www.creative-tim.com/product/soft-ui-dashboard">Free Download</a>
              <a class="btn btn-outline-dark w-100" href="https://www.creative-tim.com/learning-lab/bootstrap/license/soft-ui-dashboard">View documentation</a>
              <div class="w-100 text-center">
                  <a class="github-button" href="https://github.com/creativetimofficial/soft-ui-dashboard" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star creativetimofficial/soft-ui-dashboard on GitHub">Star</a>
                  <h6 class="mt-3">Thank you for sharing!</h6>
                  <a href="https://twitter.com/intent/tweet?text=Check%20Soft%20UI%20Dashboard%20made%20by%20%40CreativeTim%20%23webdesign%20%23dashboard%20%23bootstrap5&amp;url=https%3A%2F%2Fwww.creative-tim.com%2Fproduct%2Fsoft-ui-dashboard" class="btn btn-dark mb-0 me-2"
                      target="_blank">
                      <i class="fab fa-twitter me-1" aria-hidden="true"></i> Tweet
                  </a>
                  <a href="https://www.facebook.com/sharer/sharer.php?u=https://www.creative-tim.com/product/soft-ui-dashboard" class="btn btn-dark mb-0 me-2" target="_blank">
                      <i class="fab fa-facebook-square me-1" aria-hidden="true"></i> Share
                  </a>
              </div>
          </div>
      </div>
  </div>
</div>


